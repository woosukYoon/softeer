## 리뷰
## 주요 진행 활동
- pyspark 로컬 설치
- 미션 2 진행

## 새롭게 알게 된 내용

터미널에서 pyspark 명령어를 통해 바로 jupyter notebook에 들어갈 수 있도록 설정하였다. 그 과정에서 homebrew 경로와 로컬 python 경로가 충돌하여서 jupyter notebook의 UI가 뜨지 않았는데, 이를 jupyter notebook을 로컬 python에 매칭하는 방식으로 환경변수를 변화시켜 문제를 해결했다.

java 23은 권한 관련 문제 때문에 pyspark에 사용할 수 없다. 그래서 환경변수에서 java의 version을 파일 경로를 직접 맵핑하여 17로 설정해주었다.

SparkSession은 한 번 생성하면 여러 작업에서 공유된다. 그래서 보통 Jupyter notebook을 실행할 때 최초 실행시 한번만 생성하면 된다.

데이터 셋을 merge하면서 계속 VendorID의 형변환 관련해서 오류가 뜨고 있다. -> 각 parquet 파일을 반복문을 통해 순차적으로 불러온 후, 이를 형변환 시키고 합치는 형식으로 코드를 짜니 문제 해결.

### pyspark.sql vs pandas API on Spark
pyspark에서 데이터프레임을 다루는 방식으로는 pysaprk.sql과 pyspark.pandas가 존재. 둘은 다음과 같은 차이가 존재한다.

1.  pyspark.sql</br>

    SQL 스타일</br>
    초대형 분산 데이터 셋</br>
    완전한 분산 처리</br>
    대용량 분석, SQL 쿼리</br>

2. pyspark.pandas</br>

    pandas 스타일</br>
    대형 데이터셋(Pandas보다 크지만 Spark보다는 덜 분산됨)</br>
    Pandas처럼 다루지만 Spark 기반</br>
    기본 Pandas 코드 변환</br>

pyspark.pandas는 낮은 numpy version(1.23.0)에 호환된다.

### TimestampType vs TimestampNYZType

1. TimestampType

타임존을 포함하는 타입으로써 저장할 때 UTC(세계 협정시)로 변환되어 저장.

2. TimestampNTZType

수집된 데이터 시간에 맞게 로컬의 시간에 맞게 데이터 저장. pyspark.pandas에서는 호환되지 않음.

## 느낀점
오늘도 pyspark를 설치하기 위해서 시간을 2시간 이상 사용했다. 주요한 학습을 했다고 하기는 뭐하지만, 멘탈을 잘 부여잡고, 원인 파악을 해서 고쳐나갔기에 뿌듯했다.

## 앞으로의 학습 방향
추가적으로 M2를 진행하고, pyspark.pandas와 pyspark.sql을 모두 실습해보기

내일 팀 회의 전 보고서 추출 프롬프트 수정 진행 후, 제품 구체화.

내일 시간이 남으면 Week 2와 Week 3에서 보완할 점 찾아서 보완.

## 회고
## Keep
pyspark를 설치하면서 어제처럼 또 다시 한번 멘탈을 잡지 못하고 설치를 포기하여 미션을 진행하지 못했을 수도 있는데, 어제의 실수를 반복하지 않기 위해 감정을 잘 컨트롤하고 멘탈을 관리해서 결국 문제를 해결한 점이 잘한 것 같다. 앞으로도 노력해도 개선이 안되고 정체되어있을 때는 계속 부여잡고 있기보다는 휴식을 통해 마음을 리프레쉬하는 것이 더 효율적이고 좋은 방법일 것이라 깨달았다.

## Problem
pyspark 설치 과정에서 멘탈과 감정은 잘 컨트롤하여 성공하였지만, 그 과정에서 충분히 오류 원인으로서 생각할 수 있는 부분을 바로 떠올리고 생각하지 못했다. 이 원인으로는 적극적인 문제 해결 자세가 되지 않았다고 생각한다. 챗지피티에서 도출한 원인이 내 문제와 맞지 않을 것이라 생각한 부분도 있었는데, 그 부분을 확인하고 진행하느라 시간이 많이 지체되었다고 생각한다. 아무래도 내 PC인 경우, 내가 개인적으로 설정한 부분에 의해 챗지피티보다도 내가 생각하는 원인이 더 문제를 해결할 수 있는 키가 될 수 있을 것이다. 조금 더 적극적인 자세를 가지고 문제 해결을 해보려는 마음을 가지자. 그렇다면 더 효율적으로, 더 확실하게 문제를 해결할 수 있을 것이다.

## Try
내일은 조금 더 일찍 나가서, 설 일정으로 인해 못한 부분을 더 공부할 수 있도록 해야겠다.